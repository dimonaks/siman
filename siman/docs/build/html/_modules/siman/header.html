
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>siman.header &#8212; Siman 0.9.5 documentation</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Siman 0.9.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for siman.header</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">#Copyright Aksyonov D.A</span>
<span class="c1">#hello_man</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span><span class="p">,</span> <span class="n">unicode_literals</span><span class="p">,</span> <span class="n">absolute_import</span><span class="p">,</span> <span class="n">print_function</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Siman - management of VASP calculations</span>
<span class="sd">Author: Aksyonov D.A.</span>


<span class="sd">!Internal units are Angstroms!</span>
<span class="sd">Bohrs should be converted during reading!</span>

<span class="sd">TODO:</span>


<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">subprocess</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">shelve</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>



    <span class="sd">&quot;&quot;&quot;Global matplotlib control&quot;&quot;&quot;</span>
    <span class="c1"># size = 22 #for one coloumn figures</span>
    <span class="n">size</span> <span class="o">=</span> <span class="mi">16</span> <span class="c1">#for DOS</span>
    <span class="c1"># size = 16 #for two coloumn figures</span>
    <span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;font&#39;</span><span class="p">,</span><span class="n">family</span><span class="o">=</span><span class="s1">&#39;Serif&#39;</span><span class="p">)</span>
    <span class="c1"># mpl.rc(&#39;xtick&#39;, labelsize= size) </span>
    <span class="c1"># mpl.rc(&#39;ytick&#39;, labelsize= size) </span>
    <span class="c1"># mpl.rc(&#39;axes&#39;, labelsize = size) </span>
    <span class="c1"># mpl.rc(&#39;legend&#39;, fontsize= size) </span>
    <span class="c1"># mpl.rc(&#39;Axes.annotate&#39;, fontsize= size) #does not work</span>
    <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;font.size&#39;</span><span class="p">:</span> <span class="n">size</span><span class="p">})</span>
    <span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;mathtext.fontset&#39;</span><span class="p">:</span> <span class="s2">&quot;stix&quot;</span><span class="p">})</span>
    <span class="c1"># plt.rcParams[&#39;mathtext.fontset&#39;] = &quot;stix&quot;</span>

    <span class="c1">#paths to libraries needed by siman</span>
    <span class="c1"># sys.path.append(&#39;/home/dim/Simulation_wrapper/ase&#39;) #</span>
    <span class="c1"># plt = None</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">mpl</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">plt</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Warning! matplotlib is not installed! Some functions will not work!&#39;</span><span class="p">)</span>

<span class="n">history</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1">#Defaults to some project_conf values</span>
<span class="n">PBS_PROCS</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># if true than #PBS -l procs=&quot;+str(number_cores) is used</span>
<span class="n">WALLTIME_LIMIT</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># now only for PBS if True 72 hours limit is used</span>


<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">siman.default_project_conf</span> <span class="k">import</span> <span class="o">*</span>
    <span class="kn">from</span> <span class="nn">project_conf</span> <span class="k">import</span> <span class="o">*</span>
    <span class="kn">import</span> <span class="nn">project_conf</span>
    <span class="n">siman_run</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">log</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;log&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="s1">&#39;neyY&#39;</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span>


<span class="k">except</span><span class="p">:</span>
    <span class="c1"># print(&#39;Some module is used separately; default_project_conf.py is used&#39;)</span>
    <span class="k">if</span> <span class="n">mpl</span><span class="p">:</span>
        <span class="n">mpl</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;agg&#39;</span><span class="p">)</span> <span class="c1">#switch matplotlib on or off; for running script using ssh</span>
    <span class="n">siman_run</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="kn">from</span> <span class="nn">siman.default_project_conf</span> <span class="k">import</span> <span class="o">*</span>
    <span class="n">history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;separate run&#39;</span><span class="p">)</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="s1">&#39;yY&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="k">except</span><span class="p">:</span>
    <span class="n">plt</span> <span class="o">=</span> <span class="kc">None</span>

<span class="n">calc_database</span> <span class="o">=</span> <span class="s1">&#39;only_calc.gdbm3&#39;</span>

<div class="viewcode-block" id="CalcDict"><a class="viewcode-back" href="../../siman.html#siman.header.CalcDict">[docs]</a><span class="k">class</span> <span class="nc">CalcDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="c1"># print(self)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
            <span class="c1"># print(&#39;String key detected&#39;, key)</span>
            <span class="n">key_str</span> <span class="o">=</span> <span class="n">key</span>
            <span class="n">l</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]),</span> <span class="n">l</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>            
        <span class="c1"># else:</span>

        <span class="k">if</span> <span class="nb">dict</span><span class="o">.</span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
            <span class="c1"># print(&#39;key&#39;, key, &#39;is  in self&#39;)</span>
            <span class="n">val</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">calc_database</span><span class="p">,</span> <span class="n">protocol</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">d</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)]</span>
                    <span class="nb">dict</span><span class="o">.</span><span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
                    <span class="c1"># print(&#39;reading &#39;,str(key), &#39;from db&#39;)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Problem with key, return None&#39;</span><span class="p">)</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="kc">None</span>
        

        <span class="k">return</span> <span class="n">val</span>

    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">dict</span><span class="o">.</span><span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">calc_database</span><span class="p">,</span> <span class="n">protocol</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">d</span><span class="p">:</span>
                <span class="c1"># print(&#39;checking if key&#39;,key, &#39;is in db:&#39;, str(key) in d)</span>
                <span class="c1"># print(self)</span>
                <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">in</span> <span class="n">d</span>

<div class="viewcode-block" id="CalcDict.items"><a class="viewcode-back" href="../../siman.html#siman.header.CalcDict.items">[docs]</a>    <span class="k">def</span> <span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">keys</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">with</span> <span class="n">shelve</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">calc_database</span><span class="p">,</span> <span class="n">protocol</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="k">as</span> <span class="n">d</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;)&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="c1">#remove unnessary symbols from string</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="c1"># go back to tuple</span>

                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">l</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">isdigit</span><span class="p">():</span>
                    <span class="n">keyt</span> <span class="o">=</span> <span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="nb">int</span><span class="p">(</span><span class="n">l</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                    <span class="n">keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">keyt</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">keys</span></div></div>


<span class="c1">#Global variables</span>
<span class="n">final_vasp_clean</span>     <span class="o">=</span> <span class="kc">True</span> 
<span class="n">copy_to_cluster_flag</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">close_run</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1"># alows to control close run file automatically after each add_loop</span>
<span class="n">first_run</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># needed to write header of run script</span>
<span class="n">ssh_object</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># paramiko ssh_object</span>
<span class="n">sshpass</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># using sshpass wrapper for rsync; see functions.py/push_to_server()</span>
<span class="n">show</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">corenum</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">check_job</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># check job by additional ssh requests</span>

<span class="n">verbose_log</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># in addition to normal log write verbose log in any case by openning the log_verbose each time</span>


<span class="n">db</span> <span class="o">=</span> <span class="n">CalcDict</span><span class="p">()</span>
<span class="c1"># global db</span>
<span class="n">calc</span> <span class="o">=</span> <span class="n">db</span>
<span class="n">conv</span> <span class="o">=</span> <span class="p">{};</span>
<span class="n">varset</span> <span class="o">=</span> <span class="p">{};</span>
<span class="n">struct_des</span> <span class="o">=</span> <span class="p">{};</span>

<span class="n">sets</span> <span class="o">=</span> <span class="n">varset</span>






<span class="c1">#Constants</span>
<span class="n">to_ang</span> <span class="o">=</span> <span class="mf">0.52917721092</span>
<span class="n">to_eV</span> <span class="o">=</span> <span class="mf">27.21138386</span>
<span class="n">Ha_Bohr_to_eV_A</span> <span class="o">=</span> <span class="mf">51.4220641868956</span>
<span class="n">kB_to_GPa</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">eV_A_to_J_m</span> <span class="o">=</span> <span class="mf">16.021765</span>
<span class="n">eV_nm_to_J_m</span> <span class="o">=</span> <span class="mf">1.6021765</span>
<span class="n">THz2eV</span> <span class="o">=</span> <span class="mf">0.00413566553853599</span>
<span class="n">kJ_mol2eV</span> <span class="o">=</span> <span class="mf">1.0364e-2</span>
<span class="n">J2eV</span> <span class="o">=</span> <span class="mf">6.242e+18</span>

<span class="n">kB</span> <span class="o">=</span> <span class="mf">8.617e-5</span> <span class="c1"># eV/K</span>
<span class="n">TRANSITION_ELEMENTS</span> <span class="o">=</span> <span class="p">[</span><span class="mi">22</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">28</span><span class="p">]</span>
<span class="n">ALKALI_ION_ELEMENTS</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">37</span><span class="p">]</span>
<span class="n">MAGNETIC_ELEMENTS</span> <span class="o">=</span> <span class="p">[</span><span class="mi">26</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">28</span><span class="p">]</span>
<span class="c1"># EXCLUDE_NODES = False</span>
<span class="n">el_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;void&#39;</span><span class="p">:</span><span class="mi">300</span><span class="p">,</span> <span class="s1">&#39;octa&#39;</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;He&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;Li&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;Be&#39;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;N&#39;</span><span class="p">:</span><span class="mi">7</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span><span class="mi">9</span><span class="p">,</span> <span class="s1">&#39;Ne&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;Na&#39;</span><span class="p">:</span><span class="mi">11</span><span class="p">,</span> <span class="s1">&#39;Mg&#39;</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;Al&#39;</span><span class="p">:</span><span class="mi">13</span><span class="p">,</span> <span class="s1">&#39;Si&#39;</span><span class="p">:</span><span class="mi">14</span><span class="p">,</span> <span class="s1">&#39;P&#39;</span><span class="p">:</span><span class="mi">15</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span> <span class="s1">&#39;Cl&#39;</span><span class="p">:</span><span class="mi">17</span><span class="p">,</span> <span class="s1">&#39;Ar&#39;</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">:</span><span class="mi">19</span><span class="p">,</span> <span class="s1">&#39;Ca&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;Sc&#39;</span><span class="p">:</span><span class="mi">21</span><span class="p">,</span> <span class="s1">&#39;Ti&#39;</span><span class="p">:</span><span class="mi">22</span><span class="p">,</span> <span class="s1">&#39;V&#39;</span><span class="p">:</span><span class="mi">23</span><span class="p">,</span> <span class="s1">&#39;Cr&#39;</span><span class="p">:</span><span class="mi">24</span><span class="p">,</span> <span class="s1">&#39;Mn&#39;</span><span class="p">:</span><span class="mi">25</span><span class="p">,</span> <span class="s1">&#39;Fe&#39;</span><span class="p">:</span><span class="mi">26</span><span class="p">,</span> <span class="s1">&#39;Co&#39;</span><span class="p">:</span><span class="mi">27</span><span class="p">,</span> <span class="s1">&#39;Ni&#39;</span><span class="p">:</span><span class="mi">28</span><span class="p">,</span> <span class="s1">&#39;Cu&#39;</span><span class="p">:</span><span class="mi">29</span><span class="p">,</span> <span class="s1">&#39;Zn&#39;</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;Ga&#39;</span><span class="p">:</span><span class="mi">31</span><span class="p">,</span> <span class="s1">&#39;Ge&#39;</span><span class="p">:</span><span class="mi">32</span><span class="p">,</span> <span class="s1">&#39;As&#39;</span><span class="p">:</span><span class="mi">33</span><span class="p">,</span> <span class="s1">&#39;Se&#39;</span><span class="p">:</span><span class="mi">34</span><span class="p">,</span> <span class="s1">&#39;Br&#39;</span><span class="p">:</span><span class="mi">35</span><span class="p">,</span> <span class="s1">&#39;Kr&#39;</span><span class="p">:</span><span class="mi">36</span><span class="p">,</span> <span class="s1">&#39;Rb&#39;</span><span class="p">:</span><span class="mi">37</span><span class="p">,</span> <span class="s1">&#39;Sr&#39;</span><span class="p">:</span><span class="mi">38</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">:</span><span class="mi">39</span><span class="p">,</span> <span class="s1">&#39;Zr&#39;</span><span class="p">:</span><span class="mi">40</span><span class="p">,</span> <span class="s1">&#39;Nb&#39;</span><span class="p">:</span><span class="mi">41</span><span class="p">,</span> <span class="s1">&#39;Mo&#39;</span><span class="p">:</span><span class="mi">42</span><span class="p">,</span> <span class="s1">&#39;Tc&#39;</span><span class="p">:</span><span class="mi">43</span><span class="p">,</span> <span class="s1">&#39;Ru&#39;</span><span class="p">:</span><span class="mi">44</span><span class="p">,</span> <span class="s1">&#39;Rh&#39;</span><span class="p">:</span><span class="mi">45</span><span class="p">,</span> <span class="s1">&#39;Pd&#39;</span><span class="p">:</span><span class="mi">46</span><span class="p">,</span> <span class="s1">&#39;Ag&#39;</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span> <span class="s1">&#39;Cd&#39;</span><span class="p">:</span><span class="mi">48</span><span class="p">,</span> <span class="s1">&#39;In&#39;</span><span class="p">:</span><span class="mi">49</span><span class="p">,</span> <span class="s1">&#39;Sn&#39;</span><span class="p">:</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;Sb&#39;</span><span class="p">:</span><span class="mi">51</span><span class="p">,</span> <span class="s1">&#39;Te&#39;</span><span class="p">:</span><span class="mi">52</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">:</span><span class="mi">53</span><span class="p">,</span> <span class="s1">&#39;Xe&#39;</span><span class="p">:</span><span class="mi">54</span><span class="p">,</span> <span class="s1">&#39;Cs&#39;</span><span class="p">:</span><span class="mi">55</span><span class="p">,</span> <span class="s1">&#39;Ba&#39;</span><span class="p">:</span><span class="mi">56</span><span class="p">,</span> <span class="s1">&#39;La&#39;</span><span class="p">:</span><span class="mi">57</span><span class="p">,</span> <span class="s1">&#39;Ce&#39;</span><span class="p">:</span><span class="mi">58</span><span class="p">,</span> <span class="s1">&#39;Pr&#39;</span><span class="p">:</span><span class="mi">59</span><span class="p">,</span> <span class="s1">&#39;Nd&#39;</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span> <span class="s1">&#39;Pm&#39;</span><span class="p">:</span><span class="mi">61</span><span class="p">,</span> <span class="s1">&#39;Sm&#39;</span><span class="p">:</span><span class="mi">62</span><span class="p">,</span> <span class="s1">&#39;Eu&#39;</span><span class="p">:</span><span class="mi">63</span><span class="p">,</span> <span class="s1">&#39;Gd&#39;</span><span class="p">:</span><span class="mi">64</span><span class="p">,</span> <span class="s1">&#39;Tb&#39;</span><span class="p">:</span><span class="mi">65</span><span class="p">,</span> <span class="s1">&#39;Dy&#39;</span><span class="p">:</span><span class="mi">66</span><span class="p">,</span> <span class="s1">&#39;Ho&#39;</span><span class="p">:</span><span class="mi">67</span><span class="p">,</span> <span class="s1">&#39;Er&#39;</span><span class="p">:</span><span class="mi">68</span><span class="p">,</span> <span class="s1">&#39;Tm&#39;</span><span class="p">:</span><span class="mi">69</span><span class="p">,</span> <span class="s1">&#39;Yb&#39;</span><span class="p">:</span><span class="mi">70</span><span class="p">,</span> <span class="s1">&#39;Lu&#39;</span><span class="p">:</span><span class="mi">71</span><span class="p">,</span> <span class="s1">&#39;Hf&#39;</span><span class="p">:</span><span class="mi">72</span><span class="p">,</span> <span class="s1">&#39;Ta&#39;</span><span class="p">:</span><span class="mi">73</span><span class="p">,</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span><span class="mi">74</span><span class="p">,</span> <span class="s1">&#39;Re&#39;</span><span class="p">:</span><span class="mi">75</span><span class="p">,</span> <span class="s1">&#39;Os&#39;</span><span class="p">:</span><span class="mi">76</span><span class="p">,</span> <span class="s1">&#39;Ir&#39;</span><span class="p">:</span><span class="mi">77</span><span class="p">,</span> <span class="s1">&#39;Pt&#39;</span><span class="p">:</span><span class="mi">78</span><span class="p">,</span> <span class="s1">&#39;Au&#39;</span><span class="p">:</span><span class="mi">79</span><span class="p">,</span> <span class="s1">&#39;Hg&#39;</span><span class="p">:</span><span class="mi">80</span><span class="p">,</span> <span class="s1">&#39;Tl&#39;</span><span class="p">:</span><span class="mi">81</span><span class="p">,</span> <span class="s1">&#39;Pb&#39;</span><span class="p">:</span><span class="mi">82</span><span class="p">,</span> <span class="s1">&#39;Bi&#39;</span><span class="p">:</span><span class="mi">83</span><span class="p">,</span> <span class="s1">&#39;Po&#39;</span><span class="p">:</span><span class="mi">84</span><span class="p">,</span> <span class="s1">&#39;At&#39;</span><span class="p">:</span><span class="mi">85</span><span class="p">,</span> <span class="s1">&#39;Rn&#39;</span><span class="p">:</span><span class="mi">86</span><span class="p">,</span> <span class="s1">&#39;Fr&#39;</span><span class="p">:</span><span class="mi">87</span><span class="p">,</span> <span class="s1">&#39;Ra&#39;</span><span class="p">:</span><span class="mi">88</span><span class="p">,</span> <span class="s1">&#39;Ac&#39;</span><span class="p">:</span><span class="mi">89</span><span class="p">,</span> <span class="s1">&#39;Th&#39;</span><span class="p">:</span><span class="mi">90</span><span class="p">,</span> <span class="s1">&#39;Pa&#39;</span><span class="p">:</span><span class="mi">91</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">:</span><span class="mi">92</span><span class="p">,</span> <span class="s1">&#39;Np&#39;</span><span class="p">:</span><span class="mi">93</span><span class="p">,</span> <span class="s1">&#39;Pu&#39;</span><span class="p">:</span><span class="mi">94</span><span class="p">,</span> <span class="s1">&#39;Am&#39;</span><span class="p">:</span><span class="mi">95</span><span class="p">,</span> <span class="s1">&#39;Cm&#39;</span><span class="p">:</span><span class="mi">96</span><span class="p">,</span> <span class="s1">&#39;Bk&#39;</span><span class="p">:</span><span class="mi">97</span><span class="p">,</span> <span class="s1">&#39;Cf&#39;</span><span class="p">:</span><span class="mi">98</span><span class="p">,</span> <span class="s1">&#39;Es&#39;</span><span class="p">:</span><span class="mi">99</span><span class="p">,</span> <span class="s1">&#39;Fm&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;Md&#39;</span><span class="p">:</span><span class="mi">101</span><span class="p">,</span> <span class="s1">&#39;No&#39;</span><span class="p">:</span><span class="mi">102</span><span class="p">,</span> <span class="s1">&#39;Lr&#39;</span><span class="p">:</span><span class="mi">103</span><span class="p">,</span> <span class="s1">&#39;Rf&#39;</span><span class="p">:</span><span class="mi">104</span><span class="p">,</span> <span class="s1">&#39;Db&#39;</span><span class="p">:</span><span class="mi">105</span><span class="p">,</span> <span class="s1">&#39;Sg&#39;</span><span class="p">:</span><span class="mi">106</span><span class="p">,</span> <span class="s1">&#39;Bh&#39;</span><span class="p">:</span><span class="mi">107</span><span class="p">,</span> <span class="s1">&#39;Hs&#39;</span><span class="p">:</span><span class="mi">108</span><span class="p">,</span> <span class="s1">&#39;Mt&#39;</span><span class="p">:</span><span class="mi">109</span><span class="p">,</span> <span class="s1">&#39;Ds&#39;</span><span class="p">:</span><span class="mi">110</span><span class="p">,</span> <span class="s1">&#39;Rg&#39;</span><span class="p">:</span><span class="mi">111</span><span class="p">,</span> <span class="s1">&#39;Cn&#39;</span><span class="p">:</span><span class="mi">112</span><span class="p">,</span> <span class="s1">&#39;Uuq&#39;</span><span class="p">:</span><span class="mi">114</span><span class="p">,</span> <span class="s1">&#39;Uuh&#39;</span><span class="p">:</span><span class="mi">116</span><span class="p">,</span> <span class="p">}</span>
<span class="n">nu_dict</span> <span class="o">=</span> <span class="p">{</span><span class="mi">300</span><span class="p">:</span><span class="s1">&#39;void&#39;</span><span class="p">,</span> <span class="mi">200</span><span class="p">:</span><span class="s1">&#39;octa&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;He&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span><span class="s1">&#39;Li&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="s1">&#39;Be&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">6</span><span class="p">:</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="mi">7</span><span class="p">:</span><span class="s1">&#39;N&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span><span class="s1">&#39;O&#39;</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">:</span><span class="s1">&#39;Ne&#39;</span><span class="p">,</span> <span class="mi">11</span><span class="p">:</span><span class="s1">&#39;Na&#39;</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span><span class="s1">&#39;Mg&#39;</span><span class="p">,</span> <span class="mi">13</span><span class="p">:</span><span class="s1">&#39;Al&#39;</span><span class="p">,</span> <span class="mi">14</span><span class="p">:</span><span class="s1">&#39;Si&#39;</span><span class="p">,</span> <span class="mi">15</span><span class="p">:</span><span class="s1">&#39;P&#39;</span><span class="p">,</span> <span class="mi">16</span><span class="p">:</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="mi">17</span><span class="p">:</span><span class="s1">&#39;Cl&#39;</span><span class="p">,</span> <span class="mi">18</span><span class="p">:</span><span class="s1">&#39;Ar&#39;</span><span class="p">,</span> <span class="mi">19</span><span class="p">:</span><span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">:</span><span class="s1">&#39;Ca&#39;</span><span class="p">,</span> <span class="mi">21</span><span class="p">:</span><span class="s1">&#39;Sc&#39;</span><span class="p">,</span> <span class="mi">22</span><span class="p">:</span><span class="s1">&#39;Ti&#39;</span><span class="p">,</span> <span class="mi">23</span><span class="p">:</span><span class="s1">&#39;V&#39;</span><span class="p">,</span> <span class="mi">24</span><span class="p">:</span><span class="s1">&#39;Cr&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">:</span><span class="s1">&#39;Mn&#39;</span><span class="p">,</span> <span class="mi">26</span><span class="p">:</span><span class="s1">&#39;Fe&#39;</span><span class="p">,</span> <span class="mi">27</span><span class="p">:</span><span class="s1">&#39;Co&#39;</span><span class="p">,</span> <span class="mi">28</span><span class="p">:</span><span class="s1">&#39;Ni&#39;</span><span class="p">,</span> <span class="mi">29</span><span class="p">:</span><span class="s1">&#39;Cu&#39;</span><span class="p">,</span> <span class="mi">30</span><span class="p">:</span><span class="s1">&#39;Zn&#39;</span><span class="p">,</span> <span class="mi">31</span><span class="p">:</span><span class="s1">&#39;Ga&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">:</span><span class="s1">&#39;Ge&#39;</span><span class="p">,</span> <span class="mi">33</span><span class="p">:</span><span class="s1">&#39;As&#39;</span><span class="p">,</span> <span class="mi">34</span><span class="p">:</span><span class="s1">&#39;Se&#39;</span><span class="p">,</span> <span class="mi">35</span><span class="p">:</span><span class="s1">&#39;Br&#39;</span><span class="p">,</span> <span class="mi">36</span><span class="p">:</span><span class="s1">&#39;Kr&#39;</span><span class="p">,</span> <span class="mi">37</span><span class="p">:</span><span class="s1">&#39;Rb&#39;</span><span class="p">,</span> <span class="mi">38</span><span class="p">:</span><span class="s1">&#39;Sr&#39;</span><span class="p">,</span> <span class="mi">39</span><span class="p">:</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="mi">40</span><span class="p">:</span><span class="s1">&#39;Zr&#39;</span><span class="p">,</span> <span class="mi">41</span><span class="p">:</span><span class="s1">&#39;Nb&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">:</span><span class="s1">&#39;Mo&#39;</span><span class="p">,</span> <span class="mi">43</span><span class="p">:</span><span class="s1">&#39;Tc&#39;</span><span class="p">,</span> <span class="mi">44</span><span class="p">:</span><span class="s1">&#39;Ru&#39;</span><span class="p">,</span> <span class="mi">45</span><span class="p">:</span><span class="s1">&#39;Rh&#39;</span><span class="p">,</span> <span class="mi">46</span><span class="p">:</span><span class="s1">&#39;Pd&#39;</span><span class="p">,</span> <span class="mi">47</span><span class="p">:</span><span class="s1">&#39;Ag&#39;</span><span class="p">,</span> <span class="mi">48</span><span class="p">:</span><span class="s1">&#39;Cd&#39;</span><span class="p">,</span> <span class="mi">49</span><span class="p">:</span><span class="s1">&#39;In&#39;</span><span class="p">,</span> <span class="mi">50</span><span class="p">:</span><span class="s1">&#39;Sn&#39;</span><span class="p">,</span> <span class="mi">51</span><span class="p">:</span><span class="s1">&#39;Sb&#39;</span><span class="p">,</span> <span class="mi">52</span><span class="p">:</span><span class="s1">&#39;Te&#39;</span><span class="p">,</span> <span class="mi">53</span><span class="p">:</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="mi">54</span><span class="p">:</span><span class="s1">&#39;Xe&#39;</span><span class="p">,</span> <span class="mi">55</span><span class="p">:</span><span class="s1">&#39;Cs&#39;</span><span class="p">,</span> <span class="mi">56</span><span class="p">:</span><span class="s1">&#39;Ba&#39;</span><span class="p">,</span> <span class="mi">57</span><span class="p">:</span><span class="s1">&#39;La&#39;</span><span class="p">,</span> <span class="mi">58</span><span class="p">:</span><span class="s1">&#39;Ce&#39;</span><span class="p">,</span> <span class="mi">59</span><span class="p">:</span><span class="s1">&#39;Pr&#39;</span><span class="p">,</span> <span class="mi">60</span><span class="p">:</span><span class="s1">&#39;Nd&#39;</span><span class="p">,</span> <span class="mi">61</span><span class="p">:</span><span class="s1">&#39;Pm&#39;</span><span class="p">,</span> <span class="mi">62</span><span class="p">:</span><span class="s1">&#39;Sm&#39;</span><span class="p">,</span> <span class="mi">63</span><span class="p">:</span><span class="s1">&#39;Eu&#39;</span><span class="p">,</span> <span class="mi">64</span><span class="p">:</span><span class="s1">&#39;Gd&#39;</span><span class="p">,</span> <span class="mi">65</span><span class="p">:</span><span class="s1">&#39;Tb&#39;</span><span class="p">,</span> <span class="mi">66</span><span class="p">:</span><span class="s1">&#39;Dy&#39;</span><span class="p">,</span> <span class="mi">67</span><span class="p">:</span><span class="s1">&#39;Ho&#39;</span><span class="p">,</span> <span class="mi">68</span><span class="p">:</span><span class="s1">&#39;Er&#39;</span><span class="p">,</span> <span class="mi">69</span><span class="p">:</span><span class="s1">&#39;Tm&#39;</span><span class="p">,</span> <span class="mi">70</span><span class="p">:</span><span class="s1">&#39;Yb&#39;</span><span class="p">,</span> <span class="mi">71</span><span class="p">:</span><span class="s1">&#39;Lu&#39;</span><span class="p">,</span> <span class="mi">72</span><span class="p">:</span><span class="s1">&#39;Hf&#39;</span><span class="p">,</span> <span class="mi">73</span><span class="p">:</span><span class="s1">&#39;Ta&#39;</span><span class="p">,</span> <span class="mi">74</span><span class="p">:</span><span class="s1">&#39;W&#39;</span><span class="p">,</span> <span class="mi">75</span><span class="p">:</span><span class="s1">&#39;Re&#39;</span><span class="p">,</span> <span class="mi">76</span><span class="p">:</span><span class="s1">&#39;Os&#39;</span><span class="p">,</span> <span class="mi">77</span><span class="p">:</span><span class="s1">&#39;Ir&#39;</span><span class="p">,</span> <span class="mi">78</span><span class="p">:</span><span class="s1">&#39;Pt&#39;</span><span class="p">,</span> <span class="mi">79</span><span class="p">:</span><span class="s1">&#39;Au&#39;</span><span class="p">,</span> <span class="mi">80</span><span class="p">:</span><span class="s1">&#39;Hg&#39;</span><span class="p">,</span> <span class="mi">81</span><span class="p">:</span><span class="s1">&#39;Tl&#39;</span><span class="p">,</span> <span class="mi">82</span><span class="p">:</span><span class="s1">&#39;Pb&#39;</span><span class="p">,</span> <span class="mi">83</span><span class="p">:</span><span class="s1">&#39;Bi&#39;</span><span class="p">,</span> <span class="mi">84</span><span class="p">:</span><span class="s1">&#39;Po&#39;</span><span class="p">,</span> <span class="mi">85</span><span class="p">:</span><span class="s1">&#39;At&#39;</span><span class="p">,</span> <span class="mi">86</span><span class="p">:</span><span class="s1">&#39;Rn&#39;</span><span class="p">,</span> <span class="mi">87</span><span class="p">:</span><span class="s1">&#39;Fr&#39;</span><span class="p">,</span> <span class="mi">88</span><span class="p">:</span><span class="s1">&#39;Ra&#39;</span><span class="p">,</span> <span class="mi">89</span><span class="p">:</span><span class="s1">&#39;Ac&#39;</span><span class="p">,</span> <span class="mi">90</span><span class="p">:</span><span class="s1">&#39;Th&#39;</span><span class="p">,</span> <span class="mi">91</span><span class="p">:</span><span class="s1">&#39;Pa&#39;</span><span class="p">,</span> <span class="mi">92</span><span class="p">:</span><span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="mi">93</span><span class="p">:</span><span class="s1">&#39;Np&#39;</span><span class="p">,</span> <span class="mi">94</span><span class="p">:</span><span class="s1">&#39;Pu&#39;</span><span class="p">,</span> <span class="mi">95</span><span class="p">:</span><span class="s1">&#39;Am&#39;</span><span class="p">,</span> <span class="mi">96</span><span class="p">:</span><span class="s1">&#39;Cm&#39;</span><span class="p">,</span> <span class="mi">97</span><span class="p">:</span><span class="s1">&#39;Bk&#39;</span><span class="p">,</span> <span class="mi">98</span><span class="p">:</span><span class="s1">&#39;Cf&#39;</span><span class="p">,</span> <span class="mi">99</span><span class="p">:</span><span class="s1">&#39;Es&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">:</span><span class="s1">&#39;Fm&#39;</span><span class="p">,</span> <span class="mi">101</span><span class="p">:</span><span class="s1">&#39;Md&#39;</span><span class="p">,</span> <span class="mi">102</span><span class="p">:</span><span class="s1">&#39;No&#39;</span><span class="p">,</span> <span class="mi">103</span><span class="p">:</span><span class="s1">&#39;Lr&#39;</span><span class="p">,</span> <span class="mi">104</span><span class="p">:</span><span class="s1">&#39;Rf&#39;</span><span class="p">,</span> <span class="mi">105</span><span class="p">:</span><span class="s1">&#39;Db&#39;</span><span class="p">,</span> <span class="mi">106</span><span class="p">:</span><span class="s1">&#39;Sg&#39;</span><span class="p">,</span> <span class="mi">107</span><span class="p">:</span><span class="s1">&#39;Bh&#39;</span><span class="p">,</span> <span class="mi">108</span><span class="p">:</span><span class="s1">&#39;Hs&#39;</span><span class="p">,</span> <span class="mi">109</span><span class="p">:</span><span class="s1">&#39;Mt&#39;</span><span class="p">,</span> <span class="mi">110</span><span class="p">:</span><span class="s1">&#39;Ds&#39;</span><span class="p">,</span> <span class="mi">111</span><span class="p">:</span><span class="s1">&#39;Rg&#39;</span><span class="p">,</span> <span class="mi">112</span><span class="p">:</span><span class="s1">&#39;Cn&#39;</span><span class="p">,</span> <span class="mi">114</span><span class="p">:</span><span class="s1">&#39;Uuq&#39;</span><span class="p">,</span> <span class="mi">116</span><span class="p">:</span><span class="s1">&#39;Uuh&#39;</span><span class="p">,</span> <span class="p">}</span>
<span class="c1">#void 300 is not written to poscar</span>

<div class="viewcode-block" id="print_and_log"><a class="viewcode-back" href="../../siman.html#siman.header.print_and_log">[docs]</a><span class="k">def</span> <span class="nf">print_and_log</span><span class="p">(</span><span class="o">*</span><span class="n">logstrings</span><span class="p">,</span> <span class="o">**</span><span class="n">argdic</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &#39;&#39; - silent</span>
<span class="sd">    e - errors and warnings</span>
<span class="sd">    a - attentions</span>
<span class="sd">    m - minimalistic output of scientific procedures - only obligatory mess are shown</span>
<span class="sd">    M - maximalistic output of scientific procedures  </span>
<span class="sd">    debug_level importance:</span>
<span class="sd">        &#39;n&#39; - not important at all - for debugging</span>
<span class="sd">        &#39;&#39;  - almost all actions, no flag is needed</span>
<span class="sd">        &#39;y&#39; - important - major actions</span>
<span class="sd">        &#39;Y&#39; - super important, or output asked by user</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">end</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="c1"># no argument for end, make one separate line</span>
    
    <span class="n">debug_level</span>  <span class="o">=</span> <span class="s1">&#39;e&#39;</span> <span class="c1">#empty</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">argdic</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">&#39;imp&#39;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
            <span class="n">debug_level</span> <span class="o">=</span> <span class="n">argdic</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="s1">&#39;end&#39;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">argdic</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>


    <span class="n">mystring</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">logstrings</span><span class="p">:</span>
        <span class="n">mystring</span><span class="o">+=</span><span class="nb">str</span><span class="p">(</span><span class="n">m</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; &#39;</span>


    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mystring</span><span class="o">.</span><span class="n">splitlines</span><span class="p">())</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">mystring</span> <span class="o">=</span> <span class="s1">&#39;-- &#39;</span><span class="o">+</span><span class="n">mystring</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="s1">&#39;&#39;</span>
        <span class="c1"># mystring = &#39;    &#39;+mystring.replace(&#39;\n&#39;, &#39;\n    &#39;) </span>
    
    <span class="n">mystring</span><span class="o">+=</span><span class="n">end</span>


    <span class="k">if</span> <span class="s1">&#39;Error&#39;</span> <span class="ow">in</span> <span class="n">mystring</span><span class="p">:</span><span class="c1"># or &#39;Warning&#39; in mystring:</span>
        <span class="n">mystring</span><span class="o">+=</span><span class="s1">&#39;</span><span class="se">\n\n\n</span><span class="s1">&#39;</span>
    
    <span class="k">if</span> <span class="s1">&#39;Warning&#39;</span> <span class="ow">in</span> <span class="n">mystring</span> <span class="ow">or</span> <span class="s1">&#39;Attention&#39;</span> <span class="ow">in</span> <span class="n">mystring</span><span class="p">:</span>
        <span class="n">debug_level</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span>

    <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="s1">&#39;neyY&#39;</span><span class="p">:</span>
        <span class="c1"># print(level, debug_level)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">level</span> <span class="ow">in</span> <span class="n">warnings</span> <span class="ow">and</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">debug_level</span><span class="p">):</span>
            <span class="nb">print</span> <span class="p">(</span><span class="n">mystring</span><span class="p">,</span>  <span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="c1"># if warnings:</span>
    <span class="c1">#     &#39;&#39;</span>
    <span class="c1">#     # print(debug_level)</span>
    <span class="c1">#     if &#39;n&#39; in debug_level and &#39;n&#39; not in warnings:</span>
    <span class="c1">#         pass</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         print (mystring,  end = &quot;&quot;)</span>

    <span class="k">if</span> <span class="n">siman_run</span><span class="p">:</span>
        <span class="n">log</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">mystring</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">verbose_log</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;verbose_log&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">mystring</span><span class="p">)</span>


    <span class="k">if</span> <span class="s1">&#39;Error!&#39;</span> <span class="ow">in</span> <span class="n">mystring</span><span class="p">:</span>
        <span class="nb">print</span> <span class="p">(</span><span class="n">mystring</span><span class="p">)</span>
        <span class="nb">print</span> <span class="p">(</span><span class="s1">&#39;Error! keyword was detected in message; invoking RuntimeError &#39;</span><span class="p">)</span>
        <span class="c1"># sys.exit()</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span>

    <span class="k">return</span></div>

<span class="n">printlog</span> <span class="o">=</span> <span class="n">print_and_log</span>








<div class="viewcode-block" id="runBash"><a class="viewcode-back" href="../../siman.html#siman.header.runBash">[docs]</a><span class="k">def</span> <span class="nf">runBash</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">env</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">detached</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">cwd</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Input - string; Executes Bash commands and returns stdout</span>
<span class="sd">Need: import subprocess</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">detached</span><span class="p">:</span>
        <span class="n">stdout</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">stderr</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">stdout</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span>
        <span class="n">stderr</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">STDOUT</span>

    <span class="n">printlog</span><span class="p">(</span><span class="s1">&#39;running in BASH:&#39;</span><span class="p">,</span> <span class="n">cmd</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="c1"># if &#39;sshpass&#39; in cmd:</span>
    <span class="c1">#     sys.exit()</span>

    <span class="n">my_env</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="c1"># my_env[&quot;PATH&quot;] = &quot;/opt/local/bin:/opt/local/sbin:&quot; + my_env[&quot;PATH&quot;]</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> 
        <span class="c1"># executable=&#39;/bin/bash&#39;, </span>
        <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">stderr</span><span class="p">,</span> <span class="n">stdin</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">env</span> <span class="o">=</span> <span class="n">my_env</span><span class="p">,</span> <span class="n">cwd</span> <span class="o">=</span> <span class="n">cwd</span><span class="p">)</span>
    <span class="c1"># print (cmd)</span>
    <span class="c1"># print &#39;Bash output is\n&#39;+out</span>
    <span class="c1"># print ( str(out, &#39;utf-8&#39;) ) </span>
    <span class="n">out</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">out</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">out</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="k">return</span> <span class="n">out</span>  <span class="c1">#This is the stdout from the shell command</span></div>




<div class="viewcode-block" id="run_win_cmd"><a class="viewcode-back" href="../../siman.html#siman.header.run_win_cmd">[docs]</a><span class="k">def</span> <span class="nf">run_win_cmd</span><span class="p">(</span><span class="n">cmd</span><span class="p">):</span>
    <span class="c1">#example for windows</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span>
                               <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                               <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
                               <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">process</span><span class="o">.</span><span class="n">stdout</span><span class="p">:</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">errcode</span> <span class="o">=</span> <span class="n">process</span><span class="o">.</span><span class="n">returncode</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">errcode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;cmd </span><span class="si">%s</span><span class="s1"> failed, see above for details&#39;</span><span class="p">,</span> <span class="n">cmd</span><span class="p">)</span></div>



<div class="viewcode-block" id="pickle_module_migration_script"><a class="viewcode-back" href="../../siman.html#siman.header.pickle_module_migration_script">[docs]</a><span class="k">def</span> <span class="nf">pickle_module_migration_script</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This script allows to update modules in database after moving them to siman package</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="kn">import</span> <span class="nn">siman</span>
    <span class="kn">from</span> <span class="nn">siman</span> <span class="k">import</span> <span class="n">header</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s1">&#39;set_functions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">siman</span><span class="o">.</span><span class="n">set_functions</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">[</span><span class="s1">&#39;classes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">siman</span><span class="o">.</span><span class="n">classes</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">header</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">header</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../../index.html">Table of Contents</a></h3>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Siman 0.9.5 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Dmitry Aksenov.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
  </body>
</html>